<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Pulse XCap/MXI2 Â· Access</title>

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">

  <style>
    :root{
      --accent:#ff2d2d;
      --bg:#f6f7fb;
      --panel:#ffffff;
      --border: rgba(15,23,42,0.10);
      --text:#0f172a;
      --muted:#475569;
      --shadow: 0 18px 60px rgba(15, 23, 42, 0.10);
      --r:18px;
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Arial;
      background:
        radial-gradient(900px 450px at 20% 0%, rgba(255,45,45,0.10), transparent 60%),
        radial-gradient(900px 450px at 80% 0%, rgba(255,45,45,0.06), transparent 60%),
        linear-gradient(180deg, #ffffff 0%, var(--bg) 35%, var(--bg) 100%);
      min-height:100vh;
      color:var(--text);
      display:flex;
      align-items:center;
      justify-content:center;
      padding:24px;
    }
    .card{
      width:min(520px, 100%);
      background:rgba(255,255,255,0.92);
      border:1px solid var(--border);
      border-radius:calc(var(--r) + 6px);
      box-shadow:var(--shadow);
      padding:22px;
    }
    .brand{
      display:flex;
      align-items:center;
      gap:10px;
      font-weight:700;
      letter-spacing:.2px;
      margin-bottom:14px;
    }
    .dot{
      width:10px;height:10px;border-radius:999px;background:var(--accent);
      box-shadow:0 0 0 4px rgba(255,45,45,0.14);
    }
    h1{margin:0 0 6px;font-size:22px}
    p{margin:0 0 16px;color:var(--muted);font-size:13px;line-height:1.5}
    .row{display:flex;gap:10px}
    input{
      flex:1;
      border:1px solid rgba(15,23,42,0.14);
      border-radius:14px;
      padding:12px 12px;
      font-size:14px;
      outline:none;
      background:#fff;
    }
    input:focus{border-color: rgba(255,45,45,0.45); box-shadow: 0 0 0 4px rgba(255,45,45,0.10);}
    button{
      border:1px solid rgba(15,23,42,0.10);
      background: var(--accent);
      color:white;
      padding:12px 14px;
      border-radius:14px;
      font-weight:700;
      cursor:pointer;
      white-space:nowrap;
    }
    button:active{transform:translateY(1px)}
    .err{
      margin-top:10px;
      color:#b42318;
      font-size:13px;
      display:none;
    }
    .hint{
      margin-top:12px;
      color:rgba(15,23,42,0.45);
      font-size:12px;
    }
  </style>
</head>
<body>
  <div class="card">
    <div class="brand">
      <span class="dot"></span>
      <span>Pulse XCap/MXI2</span>
    </div>

    <h1>Enter password</h1>
    <p>This page is lightly protected for convenience. Enter one of the valid passwords to view the report.</p>

    <div class="row">
      <input id="pw" type="password" placeholder="Password" autocomplete="current-password" />
      <button id="btn">Unlock</button>
    </div>
    <div id="err" class="err">Incorrect password.</div>
    <div class="hint">Tip: press Enter to unlock.</div>
  </div>

  <script>
    // Required by your request:
    // - variable that holds the password value (user input)
    // - boolean that becomes true on click + equality check
    let passwordValue = "";
    let isValidPassword = false;

    // SHA-256 hashes (hex) of the allowed passwords:
    // "Expcap2015!" and "presentationpulsexcap"
    // (Passwords are not in plain text in HTML/JS)
    const ALLOWED_HASHES = new Set([
      "09707dea4eb2bf908e4f208b4a4d51dbc2406bc4167728dcdd1b620c8e304987",
      "a330eebff02f6457dee8559dde068d120a535c6e4035f914c89a598d6c8a7d66"
    ]);

    // If you want "remember me" per device/tab:
    const STORAGE_KEY = "pulse_gate_unlocked";

    function hex(buffer) {
      return [...new Uint8Array(buffer)].map(b => b.toString(16).padStart(2, "0")).join("");
    }

    async function sha256(str) {
      const enc = new TextEncoder().encode(str);
      const buf = await crypto.subtle.digest("SHA-256", enc);
      return hex(buf);
    }

    async function tryUnlock() {
      passwordValue = document.getElementById("pw").value || "";
      const h = await sha256(passwordValue);

      // boolean activated by click + equality check (via hash match)
      isValidPassword = ALLOWED_HASHES.has(h);

      const err = document.getElementById("err");
      if (isValidPassword) {
        err.style.display = "none";
        localStorage.setItem(STORAGE_KEY, "true");
        // Redirect to the static report
        window.location.href = "report.html";
      } else {
        err.style.display = "block";
      }
    }

    // Auto-redirect if already unlocked in this browser
    if (localStorage.getItem(STORAGE_KEY) === "true") {
      window.location.href = "report.html";
    }

    document.getElementById("btn").addEventListener("click", tryUnlock);
    document.getElementById("pw").addEventListener("keydown", (e) => {
      if (e.key === "Enter") tryUnlock();
    });
  </script>
</body>
</html>
